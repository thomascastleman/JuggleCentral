<!DOCTYPE html>
<html>
<head>
	<title>{{user.name}} | JuggleCentral</title>
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="/css/main.css">
	<link rel="stylesheet" type="text/css" href="/css/navbar.css">
	<link rel="stylesheet" type="text/css" href="/css/user.css">
</head>
<body>
	<div class="navbar">
		<ul>
			<li><a href="/">JuggleCentral</a></li>
			<li>
				<div id="searchTools">
					<div id="searchContainer">
						<form action="/search" method="POST">
							<input id="searchBar" name="query" type="text" placeholder="Search..." autocomplete="off">
							<button id="searchSubmit"type="submit"><i id="searchIcon" class="fas fa-search"></i></button>
						</form>
					</div>
				</div>
			</li>
			<li><a href="/search">Browse Patterns</a></li>
			<li><a href="/leaderboard">Leaderboard</a></li>
			<div id="logoutContainer" style="float:right">
				{{#auth.isAuthenticated}}
				{{#auth.userIsAdmin}}
				<li><a href="/admin">Admin Portal</a></li>
				{{/auth.userIsAdmin}}
				<li><a href="/user/{{auth.userUID}}">My Profile ({{auth.givenName}})</a></li>
				<li><a href="/logout">Log Out <i class="fas fa-sign-out-alt"></i></a></li>
				{{/auth.isAuthenticated}}
				{{^auth.isAuthenticated}}
				<li><a href="/auth/google">Log In <i class="fas fa-sign-in-alt"></i></a></li>
				{{/auth.isAuthenticated}}
			</div>
		</ul>
	</div>

	<div class="container">
		<h1 class="main-header">{{user.name}} {{#showBothNames}} ({{user.realName}}) {{/showBothNames}}</h1>
		
		<div class="sub-container">
			<p id="rank-info">Rank: {{user.userRank}}, Score: {{user.score}}</p>
			{{#viewingOwn}}<a class="user-edit-link" href="/editUser/{{user.uid}}">Edit Your Profile</a>{{/viewingOwn}}
			{{^viewingOwn}}{{#auth.userIsAdmin}}<a class="user-edit-link" href="/editUser/{{user.uid}}">Edit Juggler</a>{{/auth.userIsAdmin}}{{/viewingOwn}}

			<p id="bio">{{user.bio}}</p>

			<h1>Records</h1>
			{{#records}}
				<div class="records-row">
					<h2><a href="/pattern/{{uid}}">{{name}}</a></h2>
					<div class="catches-time-container">
						<div class="title-records-container">	
							<h3>Catches</h3>
							<div class="records-container">
								<table>
									<thead>
										<tr>
											<th>Rank</th>
											<th>Catches</th>
											<th>Date</th>
											<th>Video</th>
										</tr>
									</thead>
									<tbody>
										{{#catchRecords}}
										<tr>
											<td class= "rank">{{recordRank}}</td>
											<td>{{catches}}</td>
											<td>{{date}}</td>
											<td>{{#video}}<a href="{{video}}">Video</a>{{/video}}</td>
										</tr>
										{{/catchRecords}}
									</tbody>
								</table>
							</div>
						</div>
						<div class="title-records-container">
							<h3>Time</h3>
							<div class="records-container">
								<table>
									<thead>
										<tr>
											<th>Rank</th>
											<th>Duration</th>
											<th>Date</th>
											<th>Video</th>
										</tr>
									</thead>
									<tbody>
										{{#timeRecords}}
										<tr>
											<td class="rank">{{recordRank}}</td>
											<td>{{duration}}</td>
											<td>{{date}}</td>
											<td>{{#video}}<a href="{{video}}">Video</a>{{/video}}</td>
										</tr>
										{{/timeRecords}}
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
			{{/records}}
			{{^records}}
				<p>This user has no records</p>
			{{/records}}
		</div>
	</div>
</body>
</html>