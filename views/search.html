<!DOCTYPE html>
<html>
<head>
	<title>Search results{{#nonEmptyQuery}} for '{{query}}'{{/nonEmptyQuery}} | JuggleCentral</title>
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="/css/main.css">
	<link rel="stylesheet" type="text/css" href="/css/navbar.css">
</head>
<body>
	<div class="navbar">
		<ul>
			<li><a href="/">JuggleCentral</a></li>
			<li>
				<div id="searchTools">
					<div id="searchContainer">
						<form action="/search" method="POST">
							<input id="searchBar" name="query" type="text" placeholder="Search..." autocomplete="off">
							<button id="searchSubmit"type="submit"><i id="searchIcon" class="fas fa-search"></i></button>
						</form>
					</div>
				</div>
			</li>
			<li><a href="/search">Browse Patterns</a></li>
			<li><a href="/leaderboard">Leaderboard</a></li>
			<div id="logoutContainer" style="float:right">
				{{#auth.isAuthenticated}}
				{{#auth.userIsAdmin}}
				<li><a href="/admin">Admin Portal</a></li>
				{{/auth.userIsAdmin}}
				<li><a href="/user/{{auth.userUID}}">My Profile ({{auth.givenName}})</a></li>
				<li><a href="/logout">Log Out <i class="fas fa-sign-out-alt"></i></a></li>
				{{/auth.isAuthenticated}}
				{{^auth.isAuthenticated}}
				<li><a href="/auth/google">Log In <i class="fas fa-sign-in-alt"></i></a></li>
				{{/auth.isAuthenticated}}
			</div>
		</ul>
	</div>
	
	<!-- form for submitting search queries -->
	<form action="/search" method="POST">
		<input name="query" type="text" autocomplete="off" placeholder="Search" value="{{query}}"><button type="submit">Search</button><br>

		<input type="radio" name="searchUsers" value="0" onchange="this.form.submit();" {{^searchUsers}}checked{{/searchUsers}}> Patterns ({{numPatternResults}})<br>
		<input type="radio" name="searchUsers" value="1" onchange="this.form.submit();" {{#searchUsers}}checked{{/searchUsers}}> Jugglers ({{numUserResults}})<br>

		{{^searchUsers}}
			Show
			<select name="numObjectsFilter" onchange="this.form.submit();">
				<option>All</option>
				{{#possibleNumObjects}}
				<option value="{{numObjects}}" {{#selected}}selected{{/selected}}>{{numObjects}}-object</option>
				{{/possibleNumObjects}}
			</select>
			patterns
			<br>

			Order by
			<select name="orderBy" onchange="this.form.submit();">
				<option>Relevance</option>
				{{#orderByOptions}}
				<option value="{{name}}" {{#selected}}selected{{/selected}}>{{friendlyName}}</option>
				{{/orderByOptions}}
			</select>
		{{/searchUsers}}

		{{#searchUsers}}
			Order by
			<select name="orderBy" onchange="this.form.submit();">
				<option>Relevance</option>
				{{#orderByOptions}}
				<option value="{{name}}" {{#selected}}selected{{/selected}}>{{friendlyName}}</option>
				{{/orderByOptions}}
			</select>
		{{/searchUsers}}
	</form>

	<!-- search results -->
	<h1>{{#searchUsers}}Juggler{{/searchUsers}}{{^searchUsers}}Pattern{{/searchUsers}} Search Results{{#nonEmptyQuery}} for '{{query}}'{{/nonEmptyQuery}}</h1>
	{{#resultsExist}}
	<table>
		{{#results}}
			<tr>
				{{#searchUsers}}
				<td>
					<a href="/user/{{uid}}">{{name}}</a>
					<p>{{bio}}</p>
				</td>
				<td>
					<span>Rank {{userRank}}</span>
				</td>
				<td>
					<span>Score {{score}}</span>
				</td>
				{{/searchUsers}}

				{{^searchUsers}}
				<td>
					<a href="/pattern/{{uid}}">{{name}}</a>
					<p>{{description}}</p>
				</td>
				<td>
					<span>Num Objects: {{numObjects}}</span>
					<span>Difficulty: {{difficulty}} / 10</span>
					<span>Participants: {{numUsers}}</span>
				</td>
				<td>{{#GIF}}<img src="{{GIF}}" width="90">{{/GIF}}</td>
				{{/searchUsers}}
			</tr>
		{{/results}}
	</table>
	{{/resultsExist}}
	{{^resultsExist}}
	<p>No {{#searchUsers}}jugglers{{/searchUsers}}{{^searchUsers}}patterns{{/searchUsers}} found.</p>
	{{/resultsExist}}
</body>
</html>